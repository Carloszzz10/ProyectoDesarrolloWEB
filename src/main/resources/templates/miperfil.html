<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

 <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
              integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
              crossorigin="anonymous" referrerpolicy="no-referrer" />

        <link rel="icon" th:href="@{/Imagenes/utp_logo.png}">

        <link rel="stylesheet" th:href="@{/css/StylePrincipal.css}">
        <link rel="stylesheet" th:href="@{/css/StylePublicacion.css}">
      
        <script th:src="@{/Js/main1.js}" defer></script>
        <script th:src="@{/Js/publicar.js}" defer></script>
    
        <title>Foro UTP</title>
        
  <link rel="stylesheet" th:href="@{/css/perfiluser.css}" />
    </head>


    <body class="container-fluid mx-3">
        <!-- Incluir el dialog -->
        <div th:replace="~{layout :: dialog}"></div>

      <div th:replace="~{layout :: dialogEditar}"></div>

        <div th:replace="~{layout :: barraLateral}"></div>

       <main>
     <div class="container">
   <div class="contenedor-perfil">
    <div class="contenedor-datos">
     <img alt="Sin Foto de Perfil" height="100"  th:src="${imagenPerfil!= null ? imagenPerfil : 'Imagenes/Perfil.png'}" width="100"/>
     <div>
      <h2>
      <div th:text="${perfil.nombres + ' ' + perfil.apellidos}"></div>
      </h2>
      <p>
       <strong>
        Correo:
       </strong>
              <span th:text="${perfil.usuario}"></span>
      </p>
      <p>
       <strong>
        Sede:
       </strong>
        <span th:text="${perfil.sedeEstudio}"></span>
      </p>
      <p>
       <strong>
        Fecha de Registro:
       </strong>
    <span th:text="${perfil.fechaRegistro != null ? #temporals.format(perfil.fechaRegistro, 'dd/MM/yyyy HH:mm') : 'nulo'}"></span>

      </p>
      <p>
       <strong>
        N√∫mero:
       </strong>
   <span th:text="${perfil.numero}"></span>
      </p>
      <p>
       <strong>
        Sexo:
       </strong>
        <span th:text="${perfil.sexo}"></span>
      </p>
       <p>
       <strong>
        Rol Usuario:
       </strong>
   <span th:text="${#strings.listJoin(perfil.roles, ', ')}"></span>
      </p>
      
     </div>
    </div>
    <div class="contenedor-estadisticas">
     <div class="estadistica">
      <h4>
       Total de Publicaciones
      </h4>
      <p>
      <p th:text="${totalPublicaciones != null ? totalPublicaciones : 0}">0</p>      
      </p>
     </div>
     <div class="estadistica">
      <h4>
       Cantidad de Comentarios
      </h4>
    
         <p th:text="${totalComentarios != null ? totalComentarios : 0}">0</p>
     
     </div>
     <div class="estadistica">
      <h4>
       Total de Comunidades
      </h4>
      <p>
      <p th:text="${totalcomunidades != null ? totalcomunidades : 0}">0</p>
    
     </div>
    </div>
    <div class="row">
     <div class="col-md-6">
        <div class="contenedor-seccion contenedor-comunidades">
            <h3>Mis Comunidades</h3>
            <ul>
                <!-- Iterar sobre las comunidades -->
                <th:block th:each="comunidad : ${nombresComunidades}">
                    <li>
                        <span>üë•</span> <!-- Cambia el √≠cono seg√∫n lo que desees -->
                        <span style="color:black" th:text="${comunidad}">Nombre de la comunidad</span>
                    </li>
                </th:block>
            </ul>
        </div>
    </div>
<div class="col-md-6">
    <div class="contenedor-seccion contenedor-publicaciones">
        <h3>Mis Publicaciones</h3>
        <ul>
           
         <li th:if="${ultimosPosts.isEmpty()}">
                <span style="color: black" >Sin Publicaciones</span>
            </li>
          
            <li th:each="post : ${ultimosPosts}">
                <span>üìù</span>
                <p th:text="${#strings.length(post.contenido) > 100 ? post.contenido.substring(0, 100) + '...' : post.contenido}"></p>
                <img th:if="${post.imageUrl != null}" th:src="${post.imageUrl}" alt="Imagen de publicaci√≥n" class="imagen-publicacion" />
            </li>
        </ul>
    </div>
</div>
    </div>
    <div class="contenedor-seccion contenedor-favoritas">
     <h3>
      Publicaciones Favoritas
     </h3>
     <ul>
      <li>
       <span>
        ‚≠ê
       </span>
       Publicaci√≥n Favorita 1
      </li>
      <li>
       <span>
        ‚≠ê
       </span>
       Publicaci√≥n Favorita 2
      </li>
      <li>
       <span>
        ‚≠ê
       </span>
       Publicaci√≥n Favorita 3
      </li>
      <li>
       <span>
        ‚≠ê
       </span>
       Publicaci√≥n Favorita 4
      </li>
      <li>
       <span>
        ‚≠ê
       </span>
       Publicaci√≥n Favorita 5
      </li>
     </ul>
    </div>
   </div>
  </div>
  </main>
       <script th:src="@{/Js/main1.js}"></script>
        <script th:src="@{/Js/ValidarRegistro.js}"></script>

        <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
        <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
                integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
                integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    </body>
</html>
